meta {
  name: TC-ITEM-001 Report Found Item
  type: http
  seq: 1
}

post {
  url: {{base_url}}/api/{{api_version}}/items/found
  body: json
  auth: bearer
}

auth:bearer {
  token: {{token}}
}

body:json {
  {
    "title": "Blue Wallet",
    "category_id": "{{category_id}}",
    "location_id": "{{location_id}}",
    "image_url": "http://example.com/wallet.jpg",
    "verifications": [
      {
        "question": "What is the color?",
        "answer": "Blue"
      },
      {
        "question": "What brand?",
        "answer": "Nike"
      }
    ],
    "date_found": "2023-11-25",
    "return_method": "BRING_BY_FINDER",
    "cod": false,
    "show_phone": true,
    "contacts": [
      {
        "platform": "WHATSAPP",
        "value": "082334163783"
      }
    ]
  }
}

tests {
  test("Status is 200", function() {
    expect(res.status).to.equal(200);
  });
  
  test("Returns item", function() {
    expect(res.body.title).to.equal("Blue Wallet");
    expect(res.body.status).to.equal("OPEN");
  });
  
  // Save for claims
  if (res.body.id) {
    bru.setEnvVar("found_item_id", res.body.id);
  }
}
