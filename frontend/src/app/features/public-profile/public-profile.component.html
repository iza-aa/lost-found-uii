<div class="min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center p-4">
  
  <!-- Loading State -->
  @if (isLoading()) {
    <div class="text-center">
      <div class="w-16 h-16 border-4 border-uii-blue/30 border-t-uii-blue rounded-full animate-spin mx-auto mb-4"></div>
      <p class="text-gray-500 dark:text-gray-400">Memuat profil...</p>
    </div>
  }

  <!-- Not Found State -->
  @if (!isLoading() && notFound()) {
    <div class="text-center max-w-sm">
      <div class="w-24 h-24 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-6">
        <i class="ph ph-user-circle-dashed text-5xl text-gray-400"></i>
      </div>
      <h1 class="text-2xl font-bold text-gray-900 dark:text-white mb-2">Profil Tidak Ditemukan</h1>
      <p class="text-gray-500 dark:text-gray-400 mb-6">QR Code tidak valid atau pengguna tidak terdaftar.</p>
      <button 
        (click)="goHome()"
        class="px-6 py-3 bg-uii-blue text-white font-medium rounded-xl hover:bg-uii-blue/90 transition">
        Ke Beranda
      </button>
    </div>
  }

  <!-- Profile Card -->
  @if (!isLoading() && !notFound() && user()) {
    <div class="w-full max-w-sm">
      <!-- Header -->
      <div class="text-center mb-6">
        <div class="flex items-center justify-center gap-2 text-uii-blue dark:text-uii-gold mb-2">
          <i class="ph ph-qr-code text-xl"></i>
          <span class="text-sm font-medium">Lost & Found UII</span>
        </div>
        <p class="text-xs text-gray-500 dark:text-gray-400">Pemilik barang teridentifikasi</p>
      </div>

      <!-- Card -->
      <div class="bg-white dark:bg-gray-800 rounded-3xl shadow-xl overflow-hidden">
        <!-- Top Banner -->
        <div class="h-20 bg-gradient-to-r from-uii-blue to-blue-600"></div>
        
        <!-- Avatar -->
        <div class="relative flex justify-center -mt-12">
          <img 
            [src]="user()?.avatar || 'https://i.pravatar.cc/150'" 
            [alt]="user()?.name"
            class="w-24 h-24 rounded-full object-cover border-4 border-white dark:border-gray-800 shadow-lg"
          >
        </div>

        <!-- Info -->
        <div class="px-6 pt-4 pb-6 text-center">
          <!-- Name -->
          <h1 class="text-xl font-bold text-gray-900 dark:text-white mb-2">
            {{ user()?.name }}
          </h1>
          
          <!-- Badge -->
          <div class="flex justify-center mb-4">
            <app-user-badge [badge]="user()?.badge || 'gray'" size="md"></app-user-badge>
          </div>

          <!-- Details -->
          <div class="space-y-3 text-sm">
            @if (user()?.faculty) {
              <div class="flex items-center justify-center gap-2 text-gray-600 dark:text-gray-400">
                <i class="ph ph-buildings"></i>
                <span>{{ user()?.faculty }}</span>
              </div>
            }
            @if (user()?.studentId) {
              <div class="flex items-center justify-center gap-2 text-gray-600 dark:text-gray-400">
                <i class="ph ph-identification-card"></i>
                <span>NIM: {{ user()?.studentId }}</span>
              </div>
            }
            @if (user()?.employeeId) {
              <div class="flex items-center justify-center gap-2 text-gray-600 dark:text-gray-400">
                <i class="ph ph-identification-badge"></i>
                <span>NIP: {{ user()?.employeeId }}</span>
              </div>
            }
          </div>
        </div>

        <!-- Divider -->
        <div class="border-t border-gray-100 dark:border-gray-700"></div>

        <!-- Contact Buttons -->
        <div class="p-4 space-y-3">
          <p class="text-xs text-center text-gray-500 dark:text-gray-400 mb-4">
            Menemukan barang pemilik ini? Hubungi sekarang:
          </p>
          
          <!-- WhatsApp Button -->
          <button 
            (click)="contactViaWhatsApp()"
            class="w-full flex items-center justify-center gap-3 py-3 px-4 bg-green-500 text-white font-medium rounded-xl hover:bg-green-600 transition">
            <i class="ph-fill ph-whatsapp-logo text-xl"></i>
            <span>Hubungi via WhatsApp</span>
          </button>

          <!-- Phone Button -->
          <button 
            (click)="contactViaPhone()"
            class="w-full flex items-center justify-center gap-3 py-3 px-4 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 font-medium rounded-xl hover:bg-gray-200 dark:hover:bg-gray-600 transition">
            <i class="ph ph-phone text-xl"></i>
            <span>Telepon Langsung</span>
          </button>
        </div>
      </div>

      <!-- Footer -->
      <div class="text-center mt-6">
        <button 
          (click)="goHome()"
          class="text-sm text-gray-500 dark:text-gray-400 hover:text-uii-blue dark:hover:text-uii-gold transition">
          <i class="ph ph-arrow-left mr-1"></i>
          Kembali ke Lost & Found UII
        </button>
      </div>
    </div>
  }
</div>
