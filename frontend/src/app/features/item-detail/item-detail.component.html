<div class="min-h-screen bg-gray-50 dark:bg-gray-900">
  <!-- Loading State -->
  @if (isLoading()) {
    <div class="flex items-start justify-center min-h-screen pt-48">
      <div class="text-center">
        <app-cube-loader></app-cube-loader>
        <p class="text-gray-500 dark:text-gray-400 mt-6">Memuat detail...</p>
      </div>
    </div>
  }

  <!-- Not Found State -->
  @if (notFound()) {
    <div class="flex items-center justify-center min-h-screen px-4">
      <div class="text-center">
        <div class="w-24 h-24 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-6">
          <i class="ph ph-magnifying-glass text-5xl text-gray-400"></i>
        </div>
        <h2 class="text-2xl font-bold text-gray-900 dark:text-white mb-2">Barang Tidak Ditemukan</h2>
        <p class="text-gray-500 dark:text-gray-400 mb-6">Laporan ini mungkin sudah dihapus atau tidak ada.</p>
        <button 
          (click)="goBack()"
          class="px-6 py-3 bg-uii-blue text-white font-medium rounded-xl hover:bg-uii-blue/90 transition">
          Kembali ke Beranda
        </button>
      </div>
    </div>
  }

  <!-- Item Detail -->
  @if (item(); as item) {
    <!-- Desktop Layout Container -->
    <div class="lg:max-w-6xl lg:mx-auto lg:px-8 lg:py-8">
      
      <!-- Back Button - Desktop -->
      <button 
        (click)="goBack()"
        class="hidden lg:flex items-center gap-2 text-gray-600 dark:text-gray-400 hover:text-uii-blue dark:hover:text-uii-blue transition mb-6 group">
        <i class="ph ph-arrow-left text-xl group-hover:-translate-x-1 transition-transform"></i>
        <span>Kembali</span>
      </button>

      <!-- Mobile Header with Image -->
      <div class="relative lg:hidden">
        <!-- Mobile Back & Share Buttons -->
        <button 
          (click)="goBack()"
          class="absolute top-4 left-4 z-10 w-10 h-10 bg-white/90 dark:bg-gray-800/90 backdrop-blur rounded-full flex items-center justify-center shadow-lg hover:bg-white dark:hover:bg-gray-800 transition">
          <i class="ph ph-arrow-left text-xl text-gray-700 dark:text-gray-300"></i>
        </button>
        <button 
          (click)="shareItem()"
          class="absolute top-4 right-4 z-10 w-10 h-10 bg-white/90 dark:bg-gray-800/90 backdrop-blur rounded-full flex items-center justify-center shadow-lg hover:bg-white dark:hover:bg-gray-800 transition">
          <i class="ph ph-share-network text-xl text-gray-700 dark:text-gray-300"></i>
        </button>

        <!-- Image -->
        @if (item.imageUrl) {
          <img [src]="item.imageUrl" [alt]="item.title" class="w-full h-72 object-cover">
        } @else {
          <div class="w-full h-72 bg-gradient-to-br from-gray-200 to-gray-300 dark:from-gray-700 dark:to-gray-800 flex items-center justify-center">
            <i [class]="'ph ' + getCategoryIcon() + ' text-7xl text-gray-400 dark:text-gray-600'"></i>
          </div>
        }

        <!-- Status Badge - Mobile Overlay -->
        <div class="absolute bottom-4 left-4">
          <app-status-badge [status]="item.status" size="lg"></app-status-badge>
        </div>
      </div>

      <!-- Desktop: Image & Map Side by Side -->
      <div class="hidden lg:grid lg:grid-cols-2 lg:gap-6 lg:mb-6">
        <!-- Left: Image -->
        <div class="rounded-2xl overflow-hidden shadow-xl border border-gray-200 dark:border-gray-700 relative group">
          @if (item.imageUrl) {
            <img 
              [src]="item.imageUrl" 
              [alt]="item.title" 
              class="w-full h-[370px] object-cover group-hover:scale-105 transition-transform duration-500">
          } @else {
            <div class="w-full h-[358px] bg-gradient-to-br from-gray-200 to-gray-300 dark:from-gray-700 dark:to-gray-800 flex items-center justify-center">
              <i [class]="'ph ' + getCategoryIcon() + ' text-8xl text-gray-400 dark:text-gray-600'"></i>
            </div>
          }
          <!-- Status Badge Overlay -->
          <div class="absolute top-4 left-4">
            <app-status-badge [status]="item.status" size="lg"></app-status-badge>
          </div>
          <!-- Share Button -->
          <button 
            (click)="shareItem()"
            class="absolute top-4 right-4 w-10 h-10 bg-white/90 dark:bg-gray-800/90 backdrop-blur rounded-full flex items-center justify-center shadow-lg hover:bg-white dark:hover:bg-gray-800 transition opacity-0 group-hover:opacity-100">
            <i class="ph ph-share-network text-xl text-gray-700 dark:text-gray-300"></i>
          </button>
        </div>

        <!-- Right: Map & Location Cards -->
        <div class="flex flex-col gap-4">
          <!-- Map Card -->
          @if (hasMapLocation()) {
            <div class="rounded-2xl overflow-hidden border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 relative z-0">
              <div id="detail-map" class="w-full h-64 relative z-0"></div>
            </div>
          }

          <!-- Location Card -->
          <div class="rounded-2xl shadow-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 p-5 hover:shadow-2xl transition-shadow">
            <div class="flex items-center gap-4">
              <div class="w-14 h-14 rounded-full bg-gradient-to-br from-red-100 to-red-200 dark:from-red-900/30 dark:to-red-800/30 flex items-center justify-center shrink-0">
                <i class="ph-fill ph-map-pin text-2xl text-red-500"></i>
              </div>
              <div class="flex-1 min-w-0">
                <p class="font-bold text-lg text-gray-900 dark:text-white truncate">{{ getLocationName() }}</p>
                <p class="text-sm text-gray-500 dark:text-gray-400">Kampus UII Yogyakarta</p>
              </div>
              @if (hasMapLocation()) {
                <a 
                  [href]="'https://www.google.com/maps?q=' + getMapCoordinates()"
                  target="_blank"
                  class="w-10 h-10 rounded-full bg-uii-blue/10 flex items-center justify-center hover:bg-uii-blue hover:text-white text-uii-blue transition-all shrink-0">
                  <i class="ph ph-arrow-square-out text-lg"></i>
                </a>
              }
            </div>
          </div>
        </div>
      </div>

      <!-- Content Section -->
      <div class="px-4 py-6 -mt-4 bg-white dark:bg-gray-800 rounded-t-3xl relative lg:mt-0 lg:rounded-2xl lg:shadow-xl lg:border lg:border-gray-200 lg:dark:border-gray-700 lg:p-8">
        
        <!-- Title & Category -->
        <div class="mb-4 lg:mb-6">
          <div class="flex items-center gap-2 mb-2">
            <span class="px-2 py-1 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 text-xs font-medium rounded-full flex items-center gap-1">
              <i [class]="'ph ' + getCategoryIcon()"></i>
              {{ getCategoryLabel() }}
            </span>
          </div>
          <h1 class="text-2xl lg:text-3xl font-bold text-gray-900 dark:text-white">{{ item.title }}</h1>
        </div>

        <!-- Date, Time, Location Info -->
        <div class="flex flex-wrap gap-4 mb-6 text-sm text-gray-500 dark:text-gray-400">
          <div class="flex items-center gap-1">
            <i class="ph ph-calendar"></i>
            <span>{{ item.date }}</span>
          </div>
          @if (item.time) {
            <div class="flex items-center gap-1">
              <i class="ph ph-clock"></i>
              <span>{{ item.time }}</span>
            </div>
          }
          <div class="flex items-center gap-1 lg:hidden">
            <i class="ph ph-map-pin"></i>
            <span>{{ getLocationName() }}</span>
          </div>
        </div>

        <!-- Description -->
        <div class="mb-6">
          <h3 class="text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2 lg:text-base">Deskripsi</h3>
          <p class="text-gray-600 dark:text-gray-400 leading-relaxed lg:text-lg">{{ item.description }}</p>
        </div>

        <!-- Status-Specific Info -->
        @if (item.status === 'lost') {
          <!-- Lost Item Additional Info -->
          <div class="mb-6 space-y-3">
            <!-- Urgency Badge -->
            @if (item.urgency && item.urgency !== 'normal') {
              <div [class]="'flex items-center gap-3 p-3 rounded-xl ' + 
                (item.urgency === 'very-important' ? 'bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800' : 
                 'bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800')">
                <div [class]="'w-10 h-10 rounded-full flex items-center justify-center ' + 
                  (item.urgency === 'very-important' ? 'bg-red-100 dark:bg-red-900/50' : 'bg-yellow-100 dark:bg-yellow-900/50')">
                  <i [class]="'ph-fill text-xl ' + 
                    (item.urgency === 'very-important' ? 'ph-warning-octagon text-red-500' : 'ph-warning text-yellow-500')"></i>
                </div>
                <div>
                  <p [class]="'font-medium ' + 
                    (item.urgency === 'very-important' ? 'text-red-700 dark:text-red-400' : 'text-yellow-700 dark:text-yellow-400')">
                    {{ item.urgency === 'very-important' ? 'Sangat Penting' : 'Penting' }}
                  </p>
                  <p class="text-xs text-gray-500 dark:text-gray-400">Barang ini memiliki urgensi tinggi</p>
                </div>
              </div>
            }

            <!-- Reward Badge -->
            @if (item.reward) {
              <div class="flex items-center gap-3 p-3 bg-gradient-to-r from-yellow-50 to-amber-50 dark:from-yellow-900/20 dark:to-amber-900/20 border border-yellow-200 dark:border-yellow-800 rounded-xl">
                <div class="w-10 h-10 rounded-full bg-yellow-100 dark:bg-yellow-900/50 flex items-center justify-center">
                  <i class="ph-fill ph-gift text-xl text-yellow-600"></i>
                </div>
                <div>
                  <p class="font-medium text-yellow-700 dark:text-yellow-400">Ada Imbalan! üéÅ</p>
                  <p class="text-xs text-gray-500 dark:text-gray-400">Pelapor menawarkan imbalan bagi yang menemukan</p>
                </div>
              </div>
            }
          </div>
        }

        @if (item.status === 'found') {
          <!-- Found Item Additional Info -->
          <div class="mb-6 space-y-3">
            <!-- Report Status Badge -->
            @if (item.reportStatus && item.reportStatus !== 'active') {
              <div [class]="'flex items-center gap-3 p-3 border rounded-xl ' + 
                (item.reportStatus === 'claimed' ? 'bg-purple-50 dark:bg-purple-900/20 border-purple-200 dark:border-purple-800' : 'bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800')">
                <div [class]="'w-10 h-10 rounded-full flex items-center justify-center ' + 
                  (item.reportStatus === 'claimed' ? 'bg-purple-100 dark:bg-purple-900/50' : 'bg-green-100 dark:bg-green-900/50')">
                  <i [class]="'ph-fill text-xl ' + (item.reportStatus === 'claimed' ? 'ph-check-circle text-purple-600' : 'ph-seal-check text-green-600')"></i>
                </div>
                <div>
                  <p [class]="'font-medium ' + (item.reportStatus === 'claimed' ? 'text-purple-700 dark:text-purple-400' : 'text-green-700 dark:text-green-400')">
                    {{ getReportStatusLabel() }}
                  </p>
                  <p class="text-xs text-gray-500 dark:text-gray-400">
                    {{ item.reportStatus === 'claimed' ? 'Barang sudah diklaim oleh pemilik' : 'Laporan telah diselesaikan' }}
                  </p>
                </div>
              </div>
            }

            <!-- Storage Location -->
            @if (item.storageLocation) {
              <div class="flex items-center gap-3 p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-xl">
                <div class="w-10 h-10 rounded-full bg-blue-100 dark:bg-blue-900/50 flex items-center justify-center">
                  @if (item.storageLocation === 'with-me') {
                    <i class="ph-fill ph-hand-grabbing text-xl text-blue-600"></i>
                  } @else {
                    <i class="ph-fill ph-user-circle text-xl text-blue-600"></i>
                  }
                </div>
                <div>
                  <p class="font-medium text-blue-700 dark:text-blue-400">
                    @if (item.storageLocation === 'with-me') {
                      Dibawa oleh Penemu
                    } @else {
                      Dititipkan ke {{ item.entrustedTo || 'Pihak Lain' }}
                    }
                  </p>
                  <p class="text-xs text-gray-500 dark:text-gray-400">
                    @if (item.storageLocation === 'with-me') {
                      Hubungi penemu untuk mengambil barang
                    } @else {
                      Ambil barang di tempat penitipan
                    }
                  </p>
                </div>
              </div>
            }

            <!-- Willing to COD -->
            @if (item.willingToCod) {
              <div class="flex items-center gap-3 p-3 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-xl">
                <div class="w-10 h-10 rounded-full bg-green-100 dark:bg-green-900/50 flex items-center justify-center">
                  <i class="ph-fill ph-handshake text-xl text-green-600"></i>
                </div>
                <div>
                  <p class="font-medium text-green-700 dark:text-green-400">Bersedia COD ü§ù</p>
                  <p class="text-xs text-gray-500 dark:text-gray-400">Penemu bersedia bertemu di lokasi sesuai kesepakatan</p>
                </div>
              </div>
            }
          </div>
        }

        <!-- Mobile Map (if has coordinates) -->
        @if (hasMapLocation()) {
          <div class="mb-6 lg:hidden">
            <h3 class="text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2">Lokasi di Peta</h3>
            <div id="detail-map-mobile" class="w-full h-48 rounded-xl border border-gray-200 dark:border-gray-700 overflow-hidden"></div>
          </div>
        }

        <!-- Divider -->
        <hr class="border-gray-200 dark:border-gray-700 my-6">

        <!-- Reporter Info -->
        <div class="mb-6">
          <h3 class="text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3 lg:text-base">Dilaporkan oleh</h3>
          <div class="flex items-center gap-3 p-4 bg-gray-50 dark:bg-gray-700/50 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">
            <div class="w-12 h-12 lg:w-14 lg:h-14 bg-uii-blue/10 rounded-full flex items-center justify-center">
              <i class="ph-fill ph-user text-2xl lg:text-3xl text-uii-blue"></i>
            </div>
            <div class="flex-1">
              <div class="flex items-center gap-2">
                <span class="font-semibold text-gray-900 dark:text-white lg:text-lg">{{ item.reporterName }}</span>
                <app-user-badge [badge]="item.reporterBadge" size="sm"></app-user-badge>
              </div>
              <p class="text-sm text-gray-500 dark:text-gray-400">
                @if (isOwnItem()) {
                  Ini laporan kamu
                } @else {
                  Pelapor
                }
              </p>
            </div>
            @if (!isOwnItem()) {
              <i class="ph ph-caret-right text-gray-400 hidden lg:block"></i>
            }
          </div>
        </div>

        <!-- Action Buttons -->
        @if (!isOwnItem()) {
          <!-- For Found Items: Show Verification Button or Claim Status -->
          @if (item.status === 'found' && item.reportStatus === 'active') {
            <!-- Check if user already submitted a claim (from API) -->
            @if (userClaimStatusFromApi()) {
              <!-- User has already submitted a claim - show status -->
              <div class="space-y-3">
                @if (userClaimStatusFromApi() === 'PENDING') {
                  <!-- Pending Status -->
                  <div class="p-4 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-xl">
                    <div class="flex items-center gap-3 mb-2">
                      <div class="w-10 h-10 rounded-full bg-yellow-100 dark:bg-yellow-900/50 flex items-center justify-center">
                        <i class="ph ph-hourglass-medium text-xl text-yellow-600 animate-pulse"></i>
                      </div>
                      <div>
                        <p class="font-semibold text-yellow-700 dark:text-yellow-400">Verifikasi Terkirim</p>
                        <p class="text-xs text-gray-500 dark:text-gray-400">Menunggu konfirmasi dari penemu</p>
                      </div>
                    </div>
                    <p class="text-sm text-gray-600 dark:text-gray-400 mt-2">
                      <i class="ph ph-info"></i> Penemu akan meninjau bukti kepemilikan Anda. Harap tunggu konfirmasi.
                    </p>
                  </div>
                } @else if (userClaimStatusFromApi() === 'APPROVED') {
                  <!-- Approved Status - Show Finder's Contact -->
                  <div class="p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-xl">
                    <div class="flex items-center gap-3 mb-3">
                      <div class="w-12 h-12 rounded-full bg-green-100 dark:bg-green-900/50 flex items-center justify-center">
                        <i class="ph-fill ph-seal-check text-2xl text-green-600"></i>
                      </div>
                      <div>
                        <p class="font-bold text-green-700 dark:text-green-400">Anda Telah Terverifikasi! ‚úì</p>
                        <p class="text-sm text-gray-600 dark:text-gray-400">Silakan hubungi penemu untuk mengambil barang</p>
                      </div>
                    </div>
                    
                    <!-- Finder Contact -->
                    <div class="bg-white dark:bg-gray-800 rounded-lg p-4 border border-green-200 dark:border-green-700">
                      <p class="text-xs text-gray-500 dark:text-gray-400 mb-2">Kontak Penemu:</p>
                      <div class="flex items-center gap-3 mb-3">
                        <div class="w-10 h-10 bg-uii-blue/10 rounded-full flex items-center justify-center">
                          <i class="ph-fill ph-user text-uii-blue"></i>
                        </div>
                        <div class="flex-1">
                          <p class="font-semibold text-gray-900 dark:text-white">{{ item.reporterName }}</p>
                          @if (item.reporterPhone) {
                            <p class="text-sm text-gray-500">{{ item.reporterPhone }}</p>
                          }
                        </div>
                      </div>

                      <!-- WhatsApp Button if phone available -->
                      @if (item.reporterPhone) {
                        <a [href]="getWhatsAppLink(item.reporterPhone)" 
                           target="_blank"
                           class="flex items-center justify-center gap-2 w-full py-3 bg-green-500 text-white rounded-lg hover:bg-green-600 transition">
                          <i class="ph-fill ph-whatsapp-logo text-xl"></i>
                          Hubungi via WhatsApp
                        </a>
                      }
                    </div>
                  </div>
                } @else if (userClaimStatusFromApi() === 'REJECTED') {
                  <!-- Rejected Status -->
                  <div class="p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl">
                    <div class="flex items-center gap-3 mb-2">
                      <div class="w-10 h-10 rounded-full bg-red-100 dark:bg-red-900/50 flex items-center justify-center">
                        <i class="ph-fill ph-x-circle text-xl text-red-600"></i>
                      </div>
                      <div>
                        <p class="font-semibold text-red-700 dark:text-red-400">Verifikasi Ditolak</p>
                        <p class="text-xs text-gray-500 dark:text-gray-400">Penemu menolak klaim Anda</p>
                      </div>
                    </div>
                    <p class="text-xs text-gray-500 dark:text-gray-400 mt-2">
                      <i class="ph ph-info"></i> Jika Anda yakin ini barang Anda, silakan hubungi admin.
                    </p>
                  </div>
                }
              </div>
            } @else {
              <!-- User hasn't submitted a claim yet - show verification buttons -->
              <div class="space-y-3">
                <!-- Normal verification for non-QR items -->
                <button 
                  (click)="openVerificationModal()"
                  class="w-full py-4 px-6 bg-uii-blue text-white font-semibold rounded-xl hover:bg-uii-blue/90 hover:shadow-lg transition-all flex items-center justify-center gap-2">
                  <i class="ph ph-identification-badge text-xl"></i>
                  Klaim Barang Ini
                </button>
                <p class="text-center text-xs text-gray-400">
                  <i class="ph ph-shield-check"></i>
                  No. WhatsApp penemu baru akan ditampilkan setelah Anda terverifikasi
                </p>
              </div>
            }
          } @else if (item.status === 'found' && item.reportStatus !== 'active') {
            <div class="p-4 bg-gray-100 dark:bg-gray-700 rounded-xl text-center">
              <p class="text-gray-500 dark:text-gray-400">Barang ini sudah diklaim</p>
            </div>
          }
          
          <!-- For Lost Items: Show Finder Verification Button or Finder Status -->
          @if (item.status === 'lost') {
            <!-- Check if user already submitted a finder claim -->
            @if (userFinderStatus(); as myFinderClaim) {
              <!-- User has already submitted a finder claim - show status -->
              <div class="space-y-3">
                @if (myFinderClaim.status === 'pending') {
                  <!-- Pending Status -->
                  <div class="p-4 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-xl">
                    <div class="flex items-center gap-3 mb-2">
                      <div class="w-10 h-10 rounded-full bg-yellow-100 dark:bg-yellow-900/50 flex items-center justify-center">
                        <i class="ph ph-hourglass-medium text-xl text-yellow-600 animate-pulse"></i>
                      </div>
                      <div>
                        <p class="font-semibold text-yellow-700 dark:text-yellow-400">Pertanyaan Verifikasi Terkirim</p>
                        <p class="text-xs text-gray-500 dark:text-gray-400">Menunggu pemilik menjawab pertanyaan Anda</p>
                      </div>
                    </div>
                    <p class="text-sm text-gray-600 dark:text-gray-400 mt-2">
                      Pemilik akan menjawab pertanyaan verifikasi Anda untuk membuktikan kepemilikan.
                    </p>
                    
                    <!-- Show submitted verification questions -->
                    <div class="mt-4 pt-3 border-t border-yellow-200 dark:border-yellow-800">
                      <p class="text-xs font-semibold text-yellow-700 dark:text-yellow-400 mb-2">Pertanyaan yang Anda Buat:</p>
                      <div class="space-y-2">
                        @for (qa of myFinderClaim.verificationQuestions; track $index) {
                          <div class="bg-white dark:bg-gray-800 rounded-lg p-2">
                            <p class="text-xs text-gray-500">Pertanyaan {{ $index + 1 }}</p>
                            <p class="text-sm text-gray-700 dark:text-gray-300 font-medium">{{ qa.question }}</p>
                          </div>
                        }
                      </div>
                      @if (myFinderClaim.photoUrl) {
                        <div class="mt-2">
                          <p class="text-xs text-gray-500 mb-1">Foto Bukti:</p>
                          <img [src]="myFinderClaim.photoUrl" class="w-20 h-20 object-cover rounded-lg" alt="Bukti foto">
                        </div>
                      }
                    </div>
                  </div>
                } @else if (myFinderClaim.status === 'answered') {
                  <!-- Answered Status - Owner has answered, Finder needs to validate -->
                  <div class="p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-xl">
                    <div class="flex items-center gap-3 mb-2">
                      <div class="w-10 h-10 rounded-full bg-blue-100 dark:bg-blue-900/50 flex items-center justify-center">
                        <i class="ph ph-clipboard-text text-xl text-blue-600"></i>
                      </div>
                      <div>
                        <p class="font-semibold text-blue-700 dark:text-blue-400">Pemilik Sudah Menjawab!</p>
                        <p class="text-xs text-gray-500 dark:text-gray-400">Validasi jawaban untuk memverifikasi kepemilikan</p>
                      </div>
                    </div>
                    <p class="text-sm text-gray-600 dark:text-gray-400 mt-2">
                      Silakan periksa jawaban pemilik untuk memastikan barang ini benar miliknya.
                    </p>
                    
                    <!-- Show Q&A with owner's answers -->
                    <div class="mt-4 pt-3 border-t border-blue-200 dark:border-blue-800">
                      <p class="text-xs font-semibold text-blue-700 dark:text-blue-400 mb-2">Pertanyaan & Jawaban Pemilik:</p>
                      <div class="space-y-3">
                        @for (qa of myFinderClaim.verificationQuestions; track qa.question; let i = $index) {
                          <div class="bg-white dark:bg-gray-800 rounded-lg p-3">
                            <p class="text-xs text-gray-500 mb-1">Pertanyaan {{ i + 1 }}</p>
                            <p class="text-sm text-gray-700 dark:text-gray-300 font-medium mb-2">{{ qa.question }}</p>
                            @if (myFinderClaim.ownerAnswers && myFinderClaim.ownerAnswers[i]) {
                              <div class="mt-2 pl-3 border-l-2 border-blue-300 dark:border-blue-600">
                                <p class="text-xs text-blue-600 dark:text-blue-400 mb-1">Jawaban Pemilik:</p>
                                <p class="text-sm text-gray-800 dark:text-gray-200">{{ myFinderClaim.ownerAnswers[i].answer }}</p>
                              </div>
                            }
                          </div>
                        }
                      </div>
                    </div>

                    <!-- Photo Evidence if available -->
                    @if (myFinderClaim.photoUrl) {
                      <div class="mt-3">
                        <p class="text-xs text-gray-500 mb-2">Foto Bukti:</p>
                        <img [src]="myFinderClaim.photoUrl" class="w-full h-40 object-cover rounded-lg" alt="Foto bukti penemuan">
                      </div>
                    }
                    
                    <!-- Validation Buttons -->
                    <div class="mt-4 flex gap-2">
                      <button 
                        (click)="validateFinderClaim(myFinderClaim, true)"
                        class="flex-1 py-2.5 px-4 bg-green-500 text-white font-medium rounded-lg hover:bg-green-600 transition flex items-center justify-center gap-2">
                        <i class="ph ph-check-circle"></i>
                        Jawaban Benar
                      </button>
                      <button 
                        (click)="validateFinderClaim(myFinderClaim, false)"
                        class="flex-1 py-2.5 px-4 bg-red-500 text-white font-medium rounded-lg hover:bg-red-600 transition flex items-center justify-center gap-2">
                        <i class="ph ph-x-circle"></i>
                        Jawaban Salah
                      </button>
                    </div>
                  </div>
                } @else if (myFinderClaim.status === 'approved') {
                  <!-- Approved Status - Finder has approved Owner's answers, show Owner's Contact -->
                  <div class="p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-xl">
                    <div class="flex items-center gap-3 mb-3">
                      <div class="w-12 h-12 rounded-full bg-green-100 dark:bg-green-900/50 flex items-center justify-center">
                        <i class="ph-fill ph-seal-check text-2xl text-green-600"></i>
                      </div>
                      <div>
                        <p class="font-bold text-green-700 dark:text-green-400">Verifikasi Berhasil! ‚úì</p>
                        <p class="text-sm text-gray-600 dark:text-gray-400">Anda telah memverifikasi jawaban pemilik. Silakan hubungi pemilik untuk pengembalian.</p>
                      </div>
                    </div>
                    
                    <!-- Owner Contact -->
                    <div class="bg-white dark:bg-gray-800 rounded-lg p-4 border border-green-200 dark:border-green-700">
                      <p class="text-xs text-gray-500 dark:text-gray-400 mb-2">Kontak Pemilik:</p>
                      <div class="flex items-center gap-3 mb-3">
                        <div class="w-10 h-10 bg-uii-blue/10 rounded-full flex items-center justify-center">
                          <i class="ph-fill ph-user text-uii-blue"></i>
                        </div>
                        <div class="flex-1">
                          <div class="flex items-center gap-2">
                            <p class="font-semibold text-gray-900 dark:text-white">{{ item.reporterName }}</p>
                            <app-user-badge [badge]="item.reporterBadge" size="sm"></app-user-badge>
                          </div>
                        </div>
                      </div>

                      <!-- Contact Display -->
                      <app-contact-buttons
                        [alternativeContact]="item.alternativeContact"
                        [phone]="item.reporterPhone"
                        [exposePhone]="item.exposePhone"
                        mode="list"
                        size="sm">
                      </app-contact-buttons>
                    </div>
                    
                    <!-- Action Buttons -->
                    <div class="mt-3">
                      <app-contact-buttons
                        [alternativeContact]="item.alternativeContact"
                        [phone]="item.reporterPhone"
                        [exposePhone]="item.exposePhone"
                        mode="grid"
                        size="md">
                      </app-contact-buttons>
                    </div>
                  </div>
                } @else if (myFinderClaim.status === 'rejected') {
                  <!-- Rejected Status -->
                  <div class="p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl">
                    <div class="flex items-center gap-3 mb-2">
                      <div class="w-10 h-10 rounded-full bg-red-100 dark:bg-red-900/50 flex items-center justify-center">
                        <i class="ph-fill ph-x-circle text-xl text-red-600"></i>
                      </div>
                      <div>
                        <p class="font-semibold text-red-700 dark:text-red-400">Verifikasi Ditolak</p>
                        <p class="text-xs text-gray-500 dark:text-gray-400">Pemilik menolak klaim Anda</p>
                      </div>
                    </div>
                    @if (myFinderClaim.rejectionReason) {
                      <p class="text-sm text-gray-600 dark:text-gray-400 mt-2 bg-white dark:bg-gray-800 rounded-lg p-3">
                        <span class="font-medium">Alasan:</span> {{ myFinderClaim.rejectionReason }}
                      </p>
                    }
                    <p class="text-xs text-gray-500 dark:text-gray-400 mt-2">
                      <i class="ph ph-info"></i> Jika Anda yakin telah menemukan barang ini, silakan hubungi admin.
                    </p>
                  </div>
                }
              </div>
            } @else if (item.reportStatus === 'active') {
              <!-- User hasn't submitted a finder claim yet AND item is still active - show finder button -->
              <div class="space-y-3">
                <!-- Always show "Saya Menemukan" button for Lost items -->
                <button 
                  (click)="openFinderVerificationModal()"
                  class="w-full py-4 px-6 bg-uii-orange text-white font-semibold rounded-xl hover:bg-uii-orange/90 hover:shadow-lg transition-all flex items-center justify-center gap-2">
                  <i class="ph ph-magnifying-glass text-xl"></i>
                  Saya Menemukan Barang Ini
                </button>
                <p class="text-center text-xs text-gray-400">
                  <i class="ph ph-shield-check"></i>
                  @if (item.verificationQuestions && item.verificationQuestions.length > 0) {
                    Jawab pertanyaan verifikasi untuk mengkonfirmasi penemuan
                  } @else {
                    Laporkan penemuan Anda agar pemilik dapat menghubungi
                  }
                </p>
                
                <!-- COD info if available -->
                @if (item.willingToCod) {
                  <div class="p-3 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-xl">
                    <p class="text-sm text-green-700 dark:text-green-400">
                      <i class="ph ph-shield-check"></i> Pemilik bersedia COD di kampus dengan pengawasan satpam
                    </p>
                  </div>
                }
              </div>
            } @else {
              <!-- Item is resolved but user didn't submit a finder claim - show resolved message -->
              <div class="p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-xl">
                <div class="flex items-center gap-3">
                  <div class="w-12 h-12 rounded-full bg-green-100 dark:bg-green-900/50 flex items-center justify-center">
                    <i class="ph-fill ph-handshake text-2xl text-green-600"></i>
                  </div>
                  <div>
                    <p class="font-bold text-green-700 dark:text-green-400">Barang Telah Ditemukan! ‚úì</p>
                    <p class="text-sm text-gray-600 dark:text-gray-400">Barang ini sudah dikembalikan ke pemilik</p>
                  </div>
                </div>
              </div>
            }
          }
        } @else {
          <!-- Owner Actions -->
          <div class="space-y-4">
            <!-- APPROVED FINDER - Show Success + Finder Contact (for Lost Items Owner) -->
            @if (item.status === 'lost' && approvedFinder(); as finder) {
              <div class="p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-xl">
                <div class="flex items-center gap-3 mb-3">
                  <div class="w-12 h-12 rounded-full bg-green-100 dark:bg-green-900/50 flex items-center justify-center">
                    <i class="ph-fill ph-seal-check text-2xl text-green-600"></i>
                  </div>
                  <div>
                    <p class="font-bold text-green-700 dark:text-green-400">Jawaban Anda Terverifikasi! ‚úì</p>
                    <p class="text-sm text-gray-600 dark:text-gray-400">Silakan hubungi penemu untuk mengambil barang Anda</p>
                  </div>
                </div>
                
                <!-- Finder Contact -->
                <div class="bg-white dark:bg-gray-800 rounded-lg p-4 border border-green-200 dark:border-green-700">
                  <p class="text-xs text-gray-500 dark:text-gray-400 mb-2">Kontak Penemu:</p>
                  <div class="flex items-center gap-3 mb-3">
                    <div class="w-10 h-10 bg-uii-orange/10 rounded-full flex items-center justify-center">
                      <i class="ph-fill ph-user text-uii-orange"></i>
                    </div>
                    <div class="flex-1">
                      <div class="flex items-center gap-2">
                        <p class="font-semibold text-gray-900 dark:text-white">{{ finder.finderName }}</p>
                        <app-user-badge [badge]="finder.finderBadge" size="sm"></app-user-badge>
                      </div>
                    </div>
                  </div>

                  <!-- Contact Display - WhatsApp OR Alternative Contact (mutually exclusive) -->
                  @if (finder.exposePhone && finder.finderPhone) {
                    <!-- Toggle WA ON: Show WhatsApp only -->
                    <app-contact-buttons
                      [phone]="finder.finderPhone"
                      [exposePhone]="true"
                      mode="list"
                      size="sm">
                    </app-contact-buttons>
                  } @else {
                    <!-- Toggle WA OFF: Show Alternative Contact only -->
                    @if (finder.additionalContact && finder.additionalContact.contacts && finder.additionalContact.contacts.length > 0) {
                      <!-- New format (contacts array) -->
                      <div class="space-y-2">
                        @for (contact of finder.additionalContact!.contacts!; track contact.type) {
                          <div class="flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400 p-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg">
                            @switch (contact.type) {
                              @case ('instagram') {
                                <i class="ph-fill ph-instagram-logo text-pink-500"></i>
                                <span>IG: &#64;{{ contact.value }}</span>
                              }
                              @case ('telegram') {
                                <i class="ph-fill ph-telegram-logo text-blue-500"></i>
                                <span>Telegram: &#64;{{ contact.value }}</span>
                              }
                              @case ('email') {
                                <i class="ph ph-envelope text-gray-500"></i>
                                <span>Email: {{ contact.value }}</span>
                              }
                              @case ('line') {
                                <i class="ph ph-chat-circle-text text-green-500"></i>
                                <span>Line: {{ contact.value }}</span>
                              }
                              @default {
                                <i class="ph ph-chat-circle text-gray-500"></i>
                                <span>{{ contact.value }}</span>
                              }
                            }
                          </div>
                        }
                      </div>
                    } @else if (finder.additionalContact) {
                      <!-- Legacy format -->
                      <div class="space-y-2">
                        @if (finder.additionalContact.instagram) {
                          <div class="flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400 p-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg">
                            <i class="ph-fill ph-instagram-logo text-pink-500"></i>
                            <span>IG: &#64;{{ finder.additionalContact.instagram }}</span>
                          </div>
                        }
                        @if (finder.additionalContact.telegram) {
                          <div class="flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400 p-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg">
                            <i class="ph-fill ph-telegram-logo text-blue-500"></i>
                            <span>Telegram: &#64;{{ finder.additionalContact.telegram }}</span>
                          </div>
                        }
                        @if (finder.additionalContact.line) {
                          <div class="flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400 p-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg">
                            <i class="ph ph-chat-circle-text text-green-500"></i>
                            <span>Line: {{ finder.additionalContact.line }}</span>
                          </div>
                        }
                        @if (finder.additionalContact.other) {
                          <div class="flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400 p-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg">
                            <i class="ph ph-chat-circle text-gray-500"></i>
                            <span>{{ finder.additionalContact.other }}</span>
                          </div>
                        }
                      </div>
                    }
                  }
                </div>
                
                <!-- Action Buttons - WhatsApp button only if exposePhone is true -->
                <div class="mt-3">
                  @if (finder.exposePhone && finder.finderPhone) {
                    <app-contact-buttons
                      [phone]="finder.finderPhone"
                      [exposePhone]="true"
                      mode="grid"
                      size="md">
                    </app-contact-buttons>
                  }
                </div>

                <!-- Photo from finder if available -->
                @if (finder.photoUrl) {
                  <div class="mt-3 pt-3 border-t border-green-200 dark:border-green-700">
                    <p class="text-xs text-gray-500 mb-2">Foto dari Penemu:</p>
                    <img [src]="finder.photoUrl" alt="Foto barang" class="w-full h-32 object-cover rounded-lg">
                  </div>
                }
              </div>
            } @else if (item.status === 'lost' && item.finders && item.finders.length > 0) {
              <!-- Finders Section (Only for Lost Items - Pending review) -->
              <div class="p-4 bg-orange-50 dark:bg-orange-900/20 border border-orange-200 dark:border-orange-800 rounded-xl">
                <div class="flex items-center justify-between mb-3">
                  <div class="flex items-center gap-2">
                    <i class="ph ph-users text-xl text-orange-600"></i>
                    <span class="font-semibold text-orange-700 dark:text-orange-400">
                      Mengaku Menemukan ({{ item.finders.length }})
                    </span>
                    @if (getPendingFindersCount() > 0) {
                      <span class="px-2 py-0.5 bg-yellow-400 text-yellow-900 text-xs font-bold rounded-full">
                        {{ getPendingFindersCount() }} baru
                      </span>
                    }
                  </div>
                  <button 
                    (click)="openFindersModal()"
                    class="text-sm text-orange-600 dark:text-orange-400 hover:underline">
                    Lihat Semua
                  </button>
                </div>
                
                <!-- Quick Preview - Show first 2 finders -->
                <div class="space-y-2">
                  @for (finder of item.finders.slice(0, 2); track finder.id) {
                    <div class="flex items-center gap-3 p-3 bg-white dark:bg-gray-800 rounded-lg">
                      <div 
                        (click)="viewFinderDetail(finder)"
                        class="flex items-center gap-3 flex-1 min-w-0 cursor-pointer hover:opacity-80 transition">
                        <div class="w-10 h-10 bg-gray-100 dark:bg-gray-700 rounded-full flex items-center justify-center">
                          <i class="ph-fill ph-user text-gray-500"></i>
                        </div>
                        <div class="flex-1 min-w-0">
                          <div class="flex items-center gap-2">
                            <span class="font-medium text-gray-900 dark:text-white truncate">{{ finder.finderName }}</span>
                            <app-user-badge [badge]="finder.finderBadge" size="sm"></app-user-badge>
                          </div>
                          <p class="text-xs text-gray-500 truncate">
                            <i class="ph ph-question text-uii-blue"></i>
                            {{ finder.verificationQuestions.length }} pertanyaan verifikasi
                          </p>
                        </div>
                      </div>
                      <!-- Status Badge or Action Button -->
                      @if (finder.status === 'pending') {
                        <button 
                          (click)="openAnswerQuestionsModal(finder)"
                          class="px-3 py-1.5 bg-uii-blue text-white text-xs font-medium rounded-lg hover:bg-uii-blue/90 transition flex items-center gap-1">
                          <i class="ph ph-pencil"></i>
                          Jawab
                        </button>
                      } @else if (finder.status === 'answered') {
                        <span class="px-2 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-700 dark:bg-blue-900/50 dark:text-blue-400">
                          Menunggu Validasi
                        </span>
                      } @else {
                        <span [class]="'px-2 py-1 text-xs font-medium rounded-full ' + 
                          (finder.status === 'approved' ? 'bg-green-100 text-green-700 dark:bg-green-900/50 dark:text-green-400' :
                           'bg-red-100 text-red-700 dark:bg-red-900/50 dark:text-red-400')">
                          {{ getFinderStatusLabel(finder.status) }}
                        </span>
                      }
                    </div>
                  }
                </div>
              </div>
            }

            <!-- Claimants Section (Only for Found Items) -->
            @if (item.status === 'found' && item.claimants && item.claimants.length > 0) {
              <div class="p-4 bg-purple-50 dark:bg-purple-900/20 border border-purple-200 dark:border-purple-800 rounded-xl">
                <div class="flex items-center justify-between mb-3">
                  <div class="flex items-center gap-2">
                    <i class="ph ph-users text-xl text-purple-600"></i>
                    <span class="font-semibold text-purple-700 dark:text-purple-400">
                      Daftar Pemohon ({{ item.claimants.length }})
                    </span>
                    @if (getPendingClaimantsCount() > 0) {
                      <span class="px-2 py-0.5 bg-yellow-400 text-yellow-900 text-xs font-bold rounded-full">
                        {{ getPendingClaimantsCount() }} baru
                      </span>
                    }
                  </div>
                  <button 
                    (click)="openClaimantsModal()"
                    class="text-sm text-purple-600 dark:text-purple-400 hover:underline">
                    Lihat Semua
                  </button>
                </div>
                
                <!-- Quick Preview - Show first 2 claimants -->
                <div class="space-y-2">
                  @for (claimant of item.claimants.slice(0, 2); track claimant.id) {
                    <div 
                      (click)="viewClaimantDetail(claimant)"
                      class="flex items-center gap-3 p-3 bg-white dark:bg-gray-800 rounded-lg cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700 transition">
                      <div class="w-10 h-10 bg-gray-100 dark:bg-gray-700 rounded-full flex items-center justify-center">
                        <i class="ph-fill ph-user text-gray-500"></i>
                      </div>
                      <div class="flex-1 min-w-0">
                        <div class="flex items-center gap-2">
                          <span class="font-medium text-gray-900 dark:text-white truncate">{{ claimant.claimerName }}</span>
                          <app-user-badge [badge]="claimant.claimerBadge" size="sm"></app-user-badge>
                          @if (claimant.isQrVerified) {
                            <span class="px-1.5 py-0.5 bg-blue-100 dark:bg-blue-900/50 text-blue-600 text-xs rounded">QR ‚úì</span>
                          }
                        </div>
                        <p class="text-xs text-gray-500 truncate">{{ claimant.description }}</p>
                      </div>
                      <span [class]="'px-2 py-1 text-xs font-medium rounded-full ' + 
                        (claimant.status === 'pending' ? 'bg-yellow-100 text-yellow-700 dark:bg-yellow-900/50 dark:text-yellow-400' :
                         claimant.status === 'approved' ? 'bg-green-100 text-green-700 dark:bg-green-900/50 dark:text-green-400' :
                         'bg-red-100 text-red-700 dark:bg-red-900/50 dark:text-red-400')">
                        {{ getClaimantStatusLabel(claimant.status) }}
                      </span>
                    </div>
                  }
                </div>
              </div>
            }

            <!-- Owner Info Box -->
            <div class="p-4 lg:p-6 bg-uii-gold/10 border border-uii-gold/30 rounded-xl">
              <div class="flex items-center gap-3 mb-4">
                <i class="ph ph-info text-xl lg:text-2xl text-uii-gold"></i>
                <div>
                  <p class="font-medium text-gray-900 dark:text-white lg:text-lg">Ini laporan kamu</p>
                  <p class="text-sm text-gray-500 dark:text-gray-400">Kelola laporanmu di sini</p>
                </div>
              </div>
              
              <div class="grid grid-cols-3 gap-2 lg:gap-3">
                <button 
                  (click)="editItem()"
                  class="py-3 px-3 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 font-medium rounded-xl hover:bg-gray-50 dark:hover:bg-gray-700 transition flex flex-col items-center justify-center gap-1">
                  <i class="ph ph-pencil text-xl"></i>
                  <span class="text-xs">Edit</span>
                </button>
                <button 
                  (click)="openDeleteConfirm()"
                  class="py-3 px-3 border border-red-300 text-red-600 font-medium rounded-xl hover:bg-red-50 dark:hover:bg-red-900/20 transition flex flex-col items-center justify-center gap-1">
                  <i class="ph ph-trash text-xl"></i>
                  <span class="text-xs">Hapus</span>
                </button>
                @if (item.reportStatus === 'active') {
                  <button 
                    (click)="openCompleteConfirm()"
                    class="py-3 px-3 bg-green-500 text-white font-medium rounded-xl hover:bg-green-600 transition flex flex-col items-center justify-center gap-1">
                    <i class="ph ph-check-circle text-xl"></i>
                    <span class="text-xs">{{ item.status === 'found' ? 'Diklaim' : 'Selesai' }}</span>
                  </button>
                } @else {
                  <div class="py-3 px-3 bg-gray-100 dark:bg-gray-700 text-gray-500 font-medium rounded-xl flex flex-col items-center justify-center gap-1">
                    <i class="ph ph-check-circle text-xl"></i>
                    <span class="text-xs">{{ getReportStatusLabel() }}</span>
                  </div>
                }
              </div>
            </div>
          </div>
        }
      </div>
    </div>
  }

  <!-- Verification Modal (for Found items) - Using Component -->
  <app-claim-form-modal
    [isOpen]="showVerificationModal()"
    [currentUser]="currentUser()"
    [isQrScanned]="false"
    [isQrVerified]="false"
    (close)="closeVerificationModal()"
    (submit)="onClaimFormSubmit($event)">
  </app-claim-form-modal>

  <!-- Delete Confirmation Modal -->
  <app-confirm-modal
    [isOpen]="showDeleteConfirm()"
    type="danger"
    icon="ph ph-trash"
    title="Hapus Laporan?"
    message="Laporan akan dihapus permanen dan tidak bisa dikembalikan."
    confirmText="Hapus"
    cancelText="Batal"
    (confirm)="confirmDelete()"
    (cancel)="closeDeleteConfirm()">
  </app-confirm-modal>

  <!-- Complete Confirmation Modal -->
  <app-confirm-modal
    [isOpen]="showCompleteConfirm()"
    type="success"
    icon="ph ph-check-circle"
    [title]="item()?.status === 'found' ? 'Tandai Diklaim?' : 'Tandai Selesai?'"
    [message]="item()?.status === 'found' 
      ? 'Barang sudah diserahkan ke pemiliknya? Laporan akan ditandai sebagai Diklaim.' 
      : 'Barangmu sudah ditemukan? Laporan akan ditandai sebagai Selesai.'"
    [confirmText]="item()?.status === 'found' ? 'Diklaim' : 'Selesai'"
    cancelText="Batal"
    (confirm)="confirmComplete()"
    (cancel)="closeCompleteConfirm()">
  </app-confirm-modal>

  <!-- QR Verification Modal - Using Component -->
  <app-claim-form-modal
    [isOpen]="showQrVerificationModal()"
    [currentUser]="currentUser()"
    [isQrScanned]="true"
    [isQrVerified]="isQrOwnerVerified()"
    (close)="closeQrVerificationModal()"
    (submit)="onClaimFormSubmit($event)">
  </app-claim-form-modal>

  <!-- Claimants List Modal (for Finder) - Using Component -->
  <app-claimant-list-modal
    [isOpen]="showClaimantsModal()"
    [claimants]="item()?.claimants || []"
    (close)="closeClaimantsModal()"
    (viewDetail)="viewClaimantDetail($event)">
  </app-claimant-list-modal>

  <!-- Claimant Detail Modal (for Finder to review) - Using Component -->
  <app-claimant-detail-modal
    [isOpen]="showClaimantDetailModal()"
    [claimant]="selectedClaimant()"
    (close)="closeClaimantDetailModal()"
    (approve)="approveClaimant($event)"
    (reject)="openRejectReasonModal($event)">
  </app-claimant-detail-modal>

  <!-- Reject Reason Modal - Using Component -->
  <app-reject-reason-modal
    [isOpen]="showRejectReasonModal()"
    [title]="'Tolak Klaim?'"
    [subtitle]="'Berikan alasan mengapa klaim ini ditolak (opsional)'"
    [placeholder]="'Contoh: Bukti tidak cukup, ciri-ciri tidak cocok...'"
    [confirmText]="'Tolak Klaim'"
    (close)="closeRejectReasonModal()"
    (confirm)="onRejectClaimantWithReason($event)">
  </app-reject-reason-modal>

  <!-- Finder Verification Modal (for someone who found a lost item) - Using Component -->
  <app-finder-form-modal
    [isOpen]="showFinderVerificationModal()"
    (close)="closeFinderVerificationModal()"
    (submit)="onFinderFormSubmit($event)">
  </app-finder-form-modal>

  <!-- Finders List Modal (for Lost item owner) - Using Component -->
  <app-finder-list-modal
    [isOpen]="showFindersModal()"
    [finders]="item()?.finders || []"
    (close)="closeFindersModal()"
    (viewDetail)="viewFinderDetail($event)">
  </app-finder-list-modal>

  <!-- Finder Detail Modal (for Lost item owner to review) - Using Component -->
  <app-finder-detail-modal
    [isOpen]="showFinderDetailModal()"
    [finder]="selectedFinder()"
    (close)="closeFinderDetailModal()"
    (approve)="approveFinder($event)"
    (reject)="openFinderRejectReasonModal($event)">
  </app-finder-detail-modal>

  <!-- Finder Reject Reason Modal - Using Component -->
  <app-reject-reason-modal
    [isOpen]="showFinderRejectReasonModal()"
    [title]="'Tolak Penemu?'"
    [subtitle]="'Berikan alasan mengapa ini ditolak (opsional)'"
    [placeholder]="'Contoh: Jawaban tidak sesuai, bukan barang yang sama...'"
    [confirmText]="'Tolak'"
    (close)="closeFinderRejectReasonModal()"
    (confirm)="onRejectFinderWithReason($event)">
  </app-reject-reason-modal>

  <!-- Answer Questions Modal (for Owner to answer Finder's questions) -->
  <app-answer-questions-modal
    [isOpen]="showAnswerQuestionsModal()"
    [finder]="selectedFinderToAnswer()"
    (close)="closeAnswerQuestionsModal()"
    (submit)="onOwnerAnswerSubmit($event)">
  </app-answer-questions-modal>
</div>
